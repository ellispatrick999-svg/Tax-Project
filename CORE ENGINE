"""
Core Math Engine AI
Integrates symbolic computation, reasoning, and federal tax logic.
"""

from math_engine.sympy_engine.symbolic_solver import solve_quadratic
from math_engine.llm.reasoning import explain_solution
from math_engine.tax.tax_engine import calculate_federal_tax
from typing import Any, Dict

class MathEngine:
    """Professional AI engine for math and federal tax assistance."""

    def solve_math(self, query: str) -> Dict[str, Any]:
        """
        Solves math problems and provides structured explanations.

        Parameters:
            query (str): The math problem.

        Returns:
            dict: Contains query, result, and professional explanation.
        """
        result = solve_quadratic(query)
        explanation = explain_solution(query, result)
        return {
            "query": query,
            "result": result,
            "explanation": explanation
        }

    def calculate_tax(self, income: float, deductions: float = 0.0) -> Dict[str, Any]:
        """
        Estimates federal taxes based on income and deductions.

        Parameters:
            income (float): Gross income.
            deductions (float): Deductible expenses.

        Returns:
            dict: Professional tax summary.
        """
        return calculate_federal_tax(income, deductions)
